{% extends "base.html" %} {% block title %}My Resumes - ProfileMint{% endblock
%} {% block content %}
<style>
  .resume-card {
    border-radius: 16px;
    overflow: hidden;
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    border: 1px solid rgba(0, 0, 0, 0.08);
  }

  .resume-card:hover {
    transform: translateY(-8px) rotate(1deg);
    box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
    border-color: rgba(25, 135, 84, 0.2);
  }

  .card.border-dashed {
    border: 2px dashed #dee2e6;
    border-radius: 16px;
    transition: all 0.3s ease;
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
  }

  .card.border-dashed:hover {
    border-color: #198754;
    background: linear-gradient(135deg, #e8f5e8 0%, #d8eed8 100%);
    transform: translateY(-5px);
    box-shadow: 0 15px 35px rgba(25, 135, 84, 0.15);
  }

  .dropdown-menu {
    border-radius: 12px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
    border: 1px solid rgba(0, 0, 0, 0.08);
  }

  .dropdown-item {
    transition: all 0.2s ease;
    border-radius: 8px;
    margin: 0.2rem;
  }

  .dropdown-item:hover {
    background-color: rgba(25, 135, 84, 0.1);
    transform: translateX(5px);
  }

  .btn-mint {
    background: linear-gradient(135deg, #198754 0%, #20c997 100%);
    border: none;
    transition: all 0.3s ease;
    box-shadow: 0 5px 20px rgba(25, 135, 84, 0.3);
  }

  .btn-mint:hover {
    transform: translateY(-3px);
    box-shadow: 0 10px 30px rgba(25, 135, 84, 0.4);
    background: linear-gradient(135deg, #157347 0%, #19a27c 100%);
  }

  .bg-opacity-10 {
    backdrop-filter: blur(10px);
  }

  .badge {
    font-weight: 500;
    padding: 0.5em 0.8em;
    border-radius: 8px;
  }

  .resume-preview .bg-light {
    border-radius: 12px;
    transition: all 0.3s ease;
  }

  .resume-card:hover .resume-preview .bg-light {
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
    box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.05);
  }
</style>

<div class="container py-4">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <div>
      <h1 class="h2 fw-bold mb-1">My Resumes</h1>
      <p class="text-muted mb-0">
        Manage and organize your professional resumes
      </p>
    </div>
    <a href="{{ url_for('create_resume') }}" class="btn btn-mint">
      <i class="fas fa-plus me-2" aria-hidden="true"></i> Create New Resume
    </a>
  </div>

  {% if resumes %}
  <div class="row">
    <!-- Create New Card -->
    <div class="col-md-6 col-lg-4 mb-4">
      <div class="card border-dashed h-100">
        <div
          class="card-body text-center p-5 d-flex flex-column justify-content-center align-items-center"
        >
          <div
            class="bg-primary bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center mb-3"
            style="width: 80px; height: 80px"
          >
            <i class="fas fa-plus fa-2x text-primary" aria-hidden="true"></i>
          </div>
          <h3 class="h5 fw-bold mb-2">Create New Resume</h3>
          <p class="text-muted mb-4">
            Start from scratch or use one of our professional templates
          </p>
          <a
            href="{{ url_for('create_resume') }}"
            class="btn btn-outline-primary w-100 mt-auto"
          >
            Create New
          </a>
        </div>
      </div>
    </div>

    <!-- Resume Cards -->
    {% for resume in resumes|sort(attribute='updated_at', reverse=true) %}
    <div class="col-md-6 col-lg-4 mb-4">
      <div class="card border-0 shadow-sm h-100 resume-card">
        <div class="card-body p-4">
          <div class="d-flex justify-content-between align-items-start mb-3">
            <span class="badge bg-light text-dark">{{ resume.template }}</span>
            <div class="dropdown">
              <button
                class="btn btn-sm btn-outline-secondary border-0 dropdown-toggle"
                type="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
                aria-label="Resume options"
              >
                <i class="fas fa-ellipsis-v" aria-hidden="true"></i>
              </button>
              <ul class="dropdown-menu dropdown-menu-end shadow border-0">
                <li>
                  <a
                    class="dropdown-item"
                    href="{{ url_for('preview_resume', resume_id=resume.id) }}"
                  >
                    <i class="fas fa-eye me-2" aria-hidden="true"></i> Preview
                  </a>
                </li>
                <li>
                  <a
                    class="dropdown-item"
                    href="{{ url_for('edit_resume', resume_id=resume.id) }}"
                  >
                    <i class="fas fa-edit me-2" aria-hidden="true"></i> Edit
                  </a>
                </li>
                <li>
                  <a
                    class="dropdown-item"
                    href="{{ url_for('download_resume', resume_id=resume.id) }}"
                  >
                    <i class="fas fa-download me-2" aria-hidden="true"></i>
                    Download Options
                  </a>
                </li>
                <li><hr class="dropdown-divider my-2" /></li>
                <li>
                  <a
                    class="dropdown-item text-danger"
                    href="{{ url_for('delete_resume', resume_id=resume.id) }}"
                    onclick="return confirm('Are you sure you want to delete this resume?')"
                  >
                    <i class="fas fa-trash me-2" aria-hidden="true"></i> Delete
                  </a>
                </li>
              </ul>
            </div>
          </div>

          <h3 class="h5 fw-bold mb-3">{{ resume.title }}</h3>

          <div class="resume-preview mb-4">
            <div class="bg-light rounded p-3">
              {% set resume_data = resume.data_dict %}
              <h4 class="h6 fw-bold mb-1">
                {{ resume_data.personal_info.name if resume_data.personal_info
                else 'No Name' }}
              </h4>
              <p class="text-muted small mb-2">
                {{ resume_data.experience[0].position if resume_data.experience
                and resume_data.experience[0] else 'No Position' }}
              </p>
              <p class="small text-truncate mb-1">
                <i class="fas fa-envelope me-1" aria-hidden="true"></i>
                {{ resume_data.personal_info.email if resume_data.personal_info
                else 'No Email' }}
              </p>
              <p class="small text-truncate mb-0">
                <i class="fas fa-phone me-1" aria-hidden="true"></i>
                {{ resume_data.personal_info.phone if resume_data.personal_info
                else 'No Phone' }}
              </p>
            </div>
          </div>

          <div class="d-flex justify-content-between align-items-center">
            <span class="text-muted small">
              <i class="fas fa-clock me-1" aria-hidden="true"></i>
              {{ resume.updated_at.strftime('%b %d, %Y') }}
            </span>
            <div class="btn-group">
              <a
                href="{{ url_for('preview_resume', resume_id=resume.id) }}"
                class="btn btn-sm btn-outline-primary"
                title="Preview"
              >
                <i class="fas fa-eye" aria-hidden="true"></i>
              </a>
              <a
                href="{{ url_for('edit_resume', resume_id=resume.id) }}"
                class="btn btn-sm btn-outline-secondary"
                title="Edit"
              >
                <i class="fas fa-edit" aria-hidden="true"></i>
              </a>
              <a
                href="{{ url_for('download_resume', resume_id=resume.id) }}"
                class="btn btn-sm btn-outline-success"
                title="Download Options"
              >
                <i class="fas fa-download" aria-hidden="true"></i>
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
  {% else %}
  <div class="card border-0 shadow-sm">
    <div class="card-body p-5 text-center">
      <div
        class="bg-light rounded-circle d-inline-flex align-items-center justify-content-center mb-4"
        style="width: 100px; height: 100px"
      >
        <i class="fas fa-file-alt fa-3x text-muted" aria-hidden="true"></i>
      </div>
      <h2 class="h4 fw-bold mb-3">No resumes yet</h2>
      <p class="text-muted mb-4">
        Create your first resume to get started on your job search journey
      </p>
      <a href="{{ url_for('create_resume') }}" class="btn btn-mint btn-lg">
        <i class="fas fa-plus me-2" aria-hidden="true"></i> Create Your First
        Resume
      </a>
    </div>
  </div>
  {% endif %} {% if resumes %}
  <div class="mt-5">
    <h2 class="h4 fw-bold mb-4">Resume Statistics</h2>
    <div class="row">
      <div class="col-md-3 col-6 mb-3">
        <div class="card border-0 bg-primary bg-opacity-10">
          <div class="card-body text-center py-4">
            <h3 class="h4 fw-bold text-primary mb-0">{{ resumes|length }}</h3>
            <p class="text-muted mb-0">Total Resumes</p>
          </div>
        </div>
      </div>
      <div class="col-md-3 col-6 mb-3">
        <div class="card border-0 bg-success bg-opacity-10">
          <div class="card-body text-center py-4">
            <h3 class="h4 fw-bold text-success mb-0">
              {{ resumes|selectattr('template', 'equalto', '1')|list|length }}
            </h3>
            <p class="text-muted mb-0">Template 1</p>
          </div>
        </div>
      </div>
      <div class="col-md-3 col-6 mb-3">
        <div class="card border-0 bg-info bg-opacity-10">
          <div class="card-body text-center py-4">
            <h3 class="h4 fw-bold text-info mb-0">
              {{ resumes|selectattr('template', 'equalto', '2')|list|length }}
            </h3>
            <p class="text-muted mb-0">Template 2</p>
          </div>
        </div>
      </div>
      <div class="col-md-3 col-6 mb-3">
        <div class="card border-0 bg-warning bg-opacity-10">
          <div class="card-body text-center py-4">
            <h3 class="h4 fw-bold text-warning mb-0">
              {{ resumes|selectattr('template', 'equalto', '3')|list|length }}
            </h3>
            <p class="text-muted mb-0">Template 3</p>
          </div>
        </div>
      </div>
    </div>
  </div>
  {% endif %}
</div>
{% endblock %}
