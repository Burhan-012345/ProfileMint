{% extends "base.html" %} {% block title %}Login - ProfileMint{% endblock %} {%
block content %}
<div class="container py-5">
  <div class="row justify-content-center">
    <div class="col-md-8 col-lg-6">
      <div class="auth-card card border-0 shadow-sm">
        <div class="card-body p-5">
          <div class="text-center mb-4">
            <div class="auth-logo mb-3">
              <img
                src="{{ url_for('static', filename='img/mint.png') }}"
                alt="ProfileMint"
                width="90"
                height="90"
                loading="lazy"
              />
            </div>
            <h1 class="h2 fw-bold mb-2">Login to ProfileMint</h1>
            <p class="text-muted">
              Welcome back! Please login to your account.
            </p>
          </div>

          {% with messages = get_flashed_messages(with_categories=true) %} {% if
          messages %} {% for category, message in messages %}
          <div
            class="alert alert-{{ category }} alert-dismissible fade show"
            role="alert"
          >
            {{ message }}
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="alert"
              aria-label="Close"
            ></button>
          </div>
          {% endfor %} {% endif %} {% endwith %}

          <form
            method="POST"
            action="{{ url_for('login') }}"
            novalidate
            id="loginForm"
          >
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
            <div class="mb-3">
              <label for="email" class="form-label">Email Address</label>
              <div class="input-group">
                <span class="input-group-text"
                  ><i class="fas fa-envelope"></i
                ></span>
                <input
                  type="email"
                  class="form-control form-control-lg"
                  id="email"
                  name="email"
                  placeholder="Enter your email address"
                  required
                  autocomplete="email"
                />
              </div>
              <div class="invalid-feedback">
                Please provide a valid email address.
              </div>
            </div>

            <div class="mb-3">
              <label for="password" class="form-label">Password</label>
              <div class="input-group">
                <span class="input-group-text"
                  ><i class="fas fa-lock"></i
                ></span>
                <input
                  type="password"
                  class="form-control form-control-lg"
                  id="password"
                  name="password"
                  placeholder="Enter your password"
                  required
                  autocomplete="current-password"
                />
                <button
                  class="btn btn-outline-secondary"
                  type="button"
                  id="togglePassword"
                  aria-label="Toggle password visibility"
                >
                  <i class="fas fa-eye"></i>
                </button>
              </div>
              <div class="invalid-feedback">Please provide your password.</div>
              <div class="form-text">
                <a
                  href="{{ url_for('forgot_password') }}"
                  class="text-mint text-decoration-none"
                >
                  Forgot your password?
                </a>
              </div>
            </div>

            <div class="mb-3 form-check">
              <input
                type="checkbox"
                class="form-check-input"
                id="remember"
                name="remember"
              />
              <label class="form-check-label" for="remember">Remember me</label>
            </div>

            <div class="d-grid gap-2 mb-4">
              <button
                type="submit"
                class="btn btn-mint btn-lg"
                id="loginButton"
              >
                <span
                  class="spinner-border spinner-border-sm me-2 d-none"
                  role="status"
                  aria-hidden="true"
                ></span>
                Login
              </button>
            </div>
          </form>

          <div class="position-relative text-center my-4">
            <hr class="my-4" />
            <span class="divider-text bg-white px-3 text-muted small">
              Or continue with
            </span>
          </div>

          <div class="d-grid gap-2 mb-4">
            <a
              href="{{ url_for('login_google') }}"
              class="btn btn-outline-secondary btn-lg d-flex align-items-center justify-content-center"
            >
              <img
                src="https://developers.google.com/identity/images/g-logo.png"
                alt="Google logo"
                width="20"
                height="20"
                class="me-2"
                loading="lazy"
              />
              Continue with Google
            </a>
          </div>

          <div class="text-center">
            <p class="mb-0">
              Don't have an account?
              <a
                href="{{ url_for('register') }}"
                class="text-mint fw-semibold text-decoration-none"
              >
                Sign up
              </a>
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  .auth-card {
    border-radius: 20px;
    box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
    overflow: hidden;
    background: #3095fa; /* Light navy blue background */
    border: 1px solid rgba(10, 25, 47, 0.1);
    width: 100%;
    max-width: 450px;
    transition: all 0.3s ease;
  }

  .card-body {
    background: linear-gradient(
      135deg,
      rgba(240, 245, 255, 0.8) 0%,
      rgba(248, 250, 252, 0.9) 100%
    );
    backdrop-filter: blur(10px);
    border-radius: 20px;
  }

  .auth-logo {
    width: 90px;
    height: 90px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 20px;
    background: linear-gradient(
      135deg,
      rgba(10, 25, 47, 0.1) 0%,
      rgba(100, 255, 218, 0.1) 100%
    );
    backdrop-filter: blur(10px);
    border: 2px solid rgba(10, 25, 47, 0.1);
  }

  .input-group-text {
    background: linear-gradient(
      135deg,
      rgba(10, 25, 47, 0.05) 0%,
      rgba(100, 255, 218, 0.05) 100%
    );
    border: 1px solid rgba(10, 25, 47, 0.1);
    border-right: none;
    color: #0a192f;
  }

  .form-control {
    border-radius: 12px;
    padding: 15px 20px;
    border: 1px solid rgba(10, 25, 47, 0.1);
    background: rgba(255, 255, 255, 0.9);
    transition: all 0.3s ease;
  }

  .form-control:focus {
    border-color: #64ffda;
    box-shadow: 0 0 0 0.3rem rgba(100, 255, 218, 0.15);
    transform: translateY(-2px);
    background: rgba(255, 255, 255, 1);
  }

  .btn-mint {
    background: linear-gradient(135deg, #0a192f 0%, #64ffda 100%);
    border: none;
    padding: 15px;
    font-weight: 600;
    border-radius: 12px;
    transition: all 0.3s ease;
    box-shadow: 0 5px 15px rgba(10, 25, 47, 0.3);
    width: 100%;
    color: white;
  }

  .btn-mint:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 20px rgba(10, 25, 47, 0.4);
    background: linear-gradient(135deg, #0a192f 0%, #4fd1c5 100%);
  }

  .btn-outline-secondary {
    border: 1px solid rgba(10, 25, 47, 0.2);
    background: rgba(255, 255, 255, 0.9);
    color: #0a192f;
    transition: all 0.3s ease;
  }

  .btn-outline-secondary:hover {
    background: rgba(10, 25, 47, 0.05);
    border-color: #0a192f;
    transform: translateY(-2px);
  }

  .divider-text {
    background: linear-gradient(
      135deg,
      rgba(240, 245, 255, 0.8) 0%,
      rgba(248, 250, 252, 0.9) 100%
    ) !important;
    color: #0a192f !important;
    font-weight: 600;
  }

  .text-mint {
    color: #0a192f !important;
    font-weight: 600;
    transition: all 0.3s ease;
  }

  .text-mint:hover {
    color: #64ffda !important;
  }

  .form-check-input:checked {
    background-color: #0a192f;
    border-color: #0a192f;
  }

  .alert {
    border-radius: 12px;
    border: 1px solid rgba(10, 25, 47, 0.1);
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(10px);
  }

  hr {
    border-color: rgba(10, 25, 47, 0.1);
  }

  .input-group {
    border-radius: 12px;
    overflow: hidden;
  }

  .input-group .btn-outline-secondary {
    border-left: none;
    background: rgba(255, 255, 255, 0.9);
  }

  .input-group .btn-outline-secondary:hover {
    background: rgba(10, 25, 47, 0.05);
  }
</style>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const form = document.getElementById("loginForm");
    const loginButton = document.getElementById("loginButton");
    const spinner = loginButton.querySelector(".spinner-border");

    // Form validation
    form.addEventListener("submit", function (event) {
      if (!form.checkValidity()) {
        event.preventDefault();
        event.stopPropagation();
      } else {
        // Show loading spinner
        spinner.classList.remove("d-none");
        loginButton.disabled = true;
      }
      form.classList.add("was-validated");
    });

    // Toggle password visibility
    const togglePassword = document.getElementById("togglePassword");
    const passwordInput = document.getElementById("password");

    togglePassword.addEventListener("click", function () {
      const type =
        passwordInput.getAttribute("type") === "password" ? "text" : "password";
      passwordInput.setAttribute("type", type);

      const eyeIcon = this.querySelector("i");
      if (type === "text") {
        eyeIcon.classList.remove("fa-eye");
        eyeIcon.classList.add("fa-eye-slash");
        this.setAttribute("aria-label", "Hide password");
      } else {
        eyeIcon.classList.remove("fa-eye-slash");
        eyeIcon.classList.add("fa-eye");
        this.setAttribute("aria-label", "Show password");
      }
    });

    // Auto-focus on email field
    document.getElementById("email").focus();

    // Remove validation on input
    const inputs = form.querySelectorAll("input");
    inputs.forEach((input) => {
      input.addEventListener("input", function () {
        if (this.checkValidity()) {
          this.classList.remove("is-invalid");
        }
      });
    });
  });
</script>
{% endblock %}
